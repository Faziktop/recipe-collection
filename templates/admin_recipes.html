{% extends "base.html" %}

{% block content %}
<div class="admin-panel">
    <h2><i class="fas fa-crown"></i> Панель администратора</h2>
    <div class="admin-links">
        <a href="{{ url_for('admin_all_recipes') }}" class="admin-link">Все рецепты</a>
        <a href="{{ url_for('admin_users') }}" class="admin-link">Пользователи</a>
        <a href="{{ url_for('index') }}" class="admin-link">На главную</a>
    </div>
</div>

<h2>Все рецепты в системе</h2>
<p>Всего рецептов: {{ recipes|length }}</p>

{% if recipes %}
<table class="admin-table">
    <thead>
        <tr>
            <th>ID</th>
            <th>Название</th>
            <th>Автор</th>
            <th>Кухня</th>
            <th>Дата</th>
            <th>Действия</th>
        </tr>
    </thead>
    <tbody>
        {% for recipe in recipes %}
        <tr>
            <td>{{ recipe.id }}</td>
            <td><a href="{{ url_for('recipe_detail', recipe_id=recipe.id) }}">{{ recipe.title }}</a></td>
            <td>{{ recipe.author.username }}</td>
            <td>{{ recipe.cuisine }}</td>
            <td>{{ recipe.created_at.strftime('%d.%m.%Y') }}</td>
            <td>
                <div style="display: flex; gap: 5px;">
                    <a href="{{ url_for('edit_recipe', recipe_id=recipe.id) }}" class="btn btn-edit btn-small">
                        <i class="fas fa-edit"></i>
                    </a>
                    <form action="{{ url_for('delete_recipe', recipe_id=recipe.id) }}" method="POST" class="delete-form">
                        <button type="submit" class="btn btn-delete btn-small" 
                                onclick="return confirm('Удалить рецепт «{{ recipe.title }}»?')">
                            <i class="fas fa-trash"></i>
                        </button>
                    </form>
                </div>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<div class="no-recipes">
    <i class="fas fa-book-open"></i>
    <h3>Пока нет рецептов</h3>
</div>
{% endif %}
{% endblock %}